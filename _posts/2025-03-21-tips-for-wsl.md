---
title: WSLのtips
last_modified_at: 2025-03-21T15:33:29
categories:
  - blog
tags: wsl
---

WSLの環境を作ったり壊したりしていくなかで、知っといた方が良いtipsをメモがてら書いておく。

## ターミナルで起動したときのログインユーザー

tarアーカイブからimportされた環境をターミナルで起動すると、rootでログインされている。これを、一般ユーザーに変えるには、ターミナルの設定をいじる必要がある。

1. ターミナルの設定を開く（ツールバーの`+`の横の下向きのブラケット=起動する環境を選ぶボタンを押すと設定が選択肢にある）
2. 左のペインで対象の環境を選ぶ
3. 「コマンドライン」の設定に、最後に`-u <ユーザー名>`を追加しておく

## デフォルトユーザーを追加

tarアーカイブからimportされた環境で`code`を実行すると、vscodeがrootユーザーで起動してしまう。これを、一般ユーザーに変えるには、`/etc/wsl.conf`を編集する。具体的には、以下を追記する。

```
[user]
default=<ユーザー名>
```

## 環境のリストを見る

power shellで以下

```shell
wsl -l
wsl -lv # 詳細になる
```

## 任意のユーザーでログインする

power shellで以下

```shell
wsl -d <環境名> -u <ユーザー名>
```

## パスワードを消しておく

これは、WSLに限った話ではないが、ユーザーのパスワードを消すには、以下をrootで実行する

```shell
passwd -d <ユーザー名>
```
